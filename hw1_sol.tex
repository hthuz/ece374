\documentclass[12pt,a4paper]{article}
\usepackage{fullpage}
\usepackage{amsmath}
\pagestyle{plain}
% choose any of the following packages to support AmsTeX
%\usepackage{amsmath,amssymb,amsfonts,mathrsfs,mathptm,bm,mathtools}
% choose the following package to insert eps figures
% for png, jpg or pdf figures, use pdflatex
%\usepackage{graphicx}


\setlength{\parindent}{1.4em}

\newcommand{\question}[1]{\bigskip\noindent{\textbf{Q{#1} solution}}}
\newcommand{\HWnum}{1}
\newcommand{\StudentA}{Zhu Hanggang$^\ast$, 3200110457}
\newcommand{\StudentB}{First Last, 3xxxxxxxxx}
\newcommand{\StudentC}{First Last, 3xxxxxxxxx}

% ===============================================================
\begin{document}

%%% header
{\noindent \rule{\linewidth}{0.2mm}}\\
\noindent{ECE 374, ZJUI, Spring 2023\hfill%
  \textbf{\large H{}W\HWnum\ Solutions} \hfill \today\smallskip}

\noindent{\hfill \StudentA, \StudentB, and \StudentC \hfill}
\\[-0.2cm]{\noindent \rule{\linewidth}{0.2mm}}
%%% end header

% =============
\question{1.A}
% =============

According to the text, $f(i)$ is the depth of the first $i$ characters of the string $s$. And $f(j)$ is the depth of the first $j$ characters of the string $s$.

As $f(i) = f(j)$, $d(S_{\leq{i}}) = d(S_{\leq{j}})$, which means that  
$$
\#a(S_{\leq{i}})-\#b(S_{\leq{i}}) = \#a(S_{\leq{j}})-\#b(S_{\leq{j}})
$$. 

By simplifying this equation, we get $\#a(S_{\leq{j}})- \#a(S_{\leq{i}}) -  (\#b(S_{\leq{j}}) - \#b(S_{\leq{i}})) = 0$.

It can be seen that $\#a(S_{\leq{j}})- \#a(S_{\leq{i}})$ is the number of $a$ in the string constructed by index $i+1$ to $j$ in string $s$, $\#b(S_{\leq{j}}) - \#b(S_{\leq{i}})$ is the number of $b$ in the string constructed by index $i+1$ to $j$ in string $s$. 

So, $s_{i+1}s_{i+2}\ldots s_j $  is a weakly balanced string.

% =============
\question{1.B}
% =============

The string is balanced, so the number of $a$ must be equal to the number of $b$ in this string. The base case is $s = \epsilon $ or $s \in \sum^\ast$. 

So, $(i)$ is proved.

As $x,y \in \sum^\ast$, by definition, we have $d(xy) = d(x)+d(y)$. As $d(x) = d(y) = 0$, $d(xy)=0$. So $s= xy$ is also balanced, $(ii)$ is proved.

Assume $s_1=a$, $s_2=b$. By definition, $d(s_1)=1$, $d(s_2)=-1$. Since we also have $d(xy) = d(x)+d(y)$, we can get $d(axb)=d(s_1)+d(x)+d(s_2)=1+d(x)-1$. As $x$ is a balanced string, $d(x)=0$. So, $d(axb)=0$, $s=axb$ is also balanced, $(iii)$ is proved.

There are no other cases.

% =============
\question{1.C}

% =============
Let $f(i) = d(s_{\le i})$. If $f(i) = f(j)$ with $ i < j$, then $s_is_{i+1}...s_{j}$ is a weakly balanced string, which is proved in 1.A. It suggests that everytime the value of $f(i)$ repeats, we can cut in the corresponding position to get weakly balanced substring. If there are m - 1 repetitive values of $f(i)$ for a certain value of i, then we can cut m - 1 times, and get m substrings.

Then we use contradiction to prove question C.Suppose there exists a balanced string $s_c \in \{a,b\}^*$ of length n such that it doesn't satisfy condition (i) and (ii). For formally,

$\bullet$ The maximum depth of $s_c$ is $<\sqrt{n}$ and 

$\bullet$ $s_c$ can't be broken into m non-empty substrings $s_c$ = $t_1\vline t_2\vline ... \vline t_m$ such that $t_2,t_3,...t_{m-1}$ are weakly balanced strings and $m \ge \sqrt{n} - 1$

To let $s_c$ fail to satisfy condition (ii), we try to find minimum possible value of m. This situation happens when there are minimum repetitive values of $f(i)$ for a given $i$. By definition of $f(i)$ we can get the following formula for $f(i)$ with $i \ge 1$:

\begin{equation*}
	f(i)=
	\begin{cases}
		f(i - 1) + 1, & s_i \mbox{ is a},\\
		f(i - 1) - 1, & s_i \mbox{ is b}
	\end{cases}
\end{equation*}

As we can see in the formula, alternating $a$s and $b$s increase the number of repetitive values of $f(i)$. So the situation happens in the case of least number of alternating $a$s and $b$s, i.e. all $a$s first and then $b$,like $aaaa...bbbb..aaaa..bbbb$. As maximum depth of $s_c$ is $<\sqrt{n}$, the minimum number of $aaaa..bbbb..$ is $ \frac{n}{2\sqrt{n}} - 1 = \frac{\sqrt{n}}{2} - 1$. The minimum number of repetitive values of $f(i)$ is ${ (\frac{\sqrt{n}}{2} - 1) * 2} = \sqrt{n} - 2$ and minimum possible value of m is $\sqrt{n} - 1$, which means such $s_c$ doesn't exist. So any balanced string much satisfy condition either (i) or (ii).

\question{2}

We use induction to solve this problem. 

\textbf{Base case:} Let n = 2. There are only two people in the world and if there's only one tribe with 2 people, no lambs are sacrificed. If there are two tribes each with 1 person, then one tribe will lose and one lamb is sacrificed. In both cases. The number of lambs sacrificed is smaller than $nlog_2n = 2$

Let n = 3, Then then number of lambs sacrificed can be 0 or 1, both of which is smaller than $3log_23$.

\textbf{Inductive hypothesis:} For any $n > 1$, at most $nlog_2n$ lambs got sacrificed.

\textbf{Induction step:} Let W be a world of n people, Assume inductive hypothesis holds for all worlds with number of people greater than 2 and less than n.

Then in the world with n-1 people, we have number of lambs sacrificed $\le (n-1)log_2(n-1)$. By adding one more person, this world will have n people. If the tribe this new-added person is in wins all the fight, then the number of lambs sacrificed doesn't change. If the the tribe this new-added person is in loses, there will be one more lamb sacrificed. In this case, we have
\begin{equation*}
    \begin{split}
        Number\ of\ lambs\ sacrificed\ in\ world\ W & \le (n-1)log_2(n-1) + 1 \\
             & = nlog_2(n-1) + 1 - log_2(n-1) \\
             & \le nlog_2(n-1) \\
             & < nlog_2(n) \\
    \end{split}
\end{equation*}

In both cases, the number of lambs sacrificed in world W is less than $nlog_2(n)$

So during this process, at most $nlog_2n$ lambs got sacrificed.

% =============
\question{3.A}
% =============

\noindent %顶格（不缩进）
	\textbf{Intuition:}
	{Assume that $\exists t \in Z$ and $\exists C \in R$,for any n $\in Z$ satisfying $n<=t$ and $n>=4$, we can get $T(n)<=Cnlogn$. Now, we are attempting to prove that for $n=t+1$, $T(n)<=Cnlogn$.}%使用{}括号并且文本换行自带空格

		$\bullet$ since $n>=4$, $[n/4]<n<=t$, $[3n/4]<n<=t$,
		\begin{align*}
 		T(n)&=2n+T([n/4])+T([3n/4]) \\
		&<=2n + \frac{Cn}{4} \log{\frac{n}{4}} + \frac{3Cn}{4} \log{ \frac{3n}{4}}\\
		&= 2n + \frac{Cn}{4}(\log{n}-\log{4}) + \frac{3Cn}{4} ({ \log{n}+\log{\frac{3}{4}}})\\
		&= 2n + Cn\log{n} + \frac{3Cn\log{3}}{4} - Cn\log{4}
		\end{align*}
		
		$\bullet$ In order to let $T(n)<=Cnlogn$,
		\begin{align*}
 		&2n + \frac{3Cn\log{3}}{4} - Cn\log{4} <0 \\
		&2 + \frac{3C\log{3}}{4} - C\log{4} <0 \\
		&C > \frac{2}{\log{4}-\frac{3}{4}\log{3}}\approx 8.189
		\end{align*}
		
	\noindent
	\textbf{Formal answer:}
	{Let $C=9$ and set a constant b satisfying $b>=1$.  We assume that $T(n)<=9nlogn+b$}.

		% 用\\意味着不换段只是换行，文本空两行可以首行缩进
		$\bullet$ \textbf{base case:}
		For $n=1$ and $n=2$, it is obvious that $T(1)=1<=b$ and $T(2)=1<=18log2+b$.


		$\bullet$ \textbf{Induction hypothesis:}
		Let $k>0$ be an arbitary integer, assume that $T(n)<=9nlogn+b$ for any integer n satisfying $n<=k$.

		
		$\bullet$ \textbf{Induction Step:}
		Now, if we prove that $T(n)<=9nlogn+b$ holds for n=k+1, then we can conclude that $T(n)<=9nlogn+b$.


		
		\textbf{case 1$(k<=8)$}:
		$T(n)=1$ for n satisfying $n=k+1<=9$. Let $f(n)=9nlogn+b$. Because $f'(n)=9+9logn>0$ for $n>=1$, f(n) is an increasing function. We can prove that $T(n)<=f(1)<=f(n)=9nlogn+b$.

		
		\textbf{case 2$(k>=9)$}:
		$T(n)=2n+T([n/4])+T([3n/4])$ for n satisfying $n=k+1>=10$. since $n=k+1>=10$, we could know that $[n/4]<n<=k$ and $[3n/4]<n<=k$. Thus, 
		\begin{align*}
 		T(n)&=2n+T([n/4])+T([3n/4]) \\
		&<=2n + \frac{9n}{4} \log{\frac{n}{4}} + \frac{27n}{4} \log{ \frac{3n}{4}}+2b\\
		&= 2n + \frac{9n}{4}(\log{n}-\log{4}) + \frac{27n}{4} ({ \log{n}+\log{\frac{3}{4}}})+2b\\
		&= 2n + 9n\log{n} + \frac{27n\log{3}}{4} - 9n\log{4} + 2b\\
		&= -0.1980n + 9nlogn + 2b
		\end{align*}

	
		In order to let $T(n)<=9nlogn + b$, we can get $b<=0.1980n$. Since b is any constant that satisfying $b>=1$ and $n=k+1>=10$, we can simply let $b=1$.
	$$ T(n)= -0.1980n+9nlogn+2 <= 9nlogn +0.02 <=9nlogn+1 =9nlogn + b$$
		Now, we can conclude that 	$T(n)<=9nlogn+1$ for all natural number n. According to the definition, we prove that $T(n)=O(nlogn)$ for nutural number n . Finally, we consider the case where n is a negative integer or 0. Obviously, $T(n)=1$, so $T(n)=O(1)$ for negative integer or 0. Overall, $T(n)=O(nlogn)$ for all integer n.\\\\


% =============
\question{3.B}
% =============
\textbf{Intuition:}
	{Assume that $\exists t \in Z$ and $\exists C \in R$,for any n $\in Z$ satisfying $n<=t$ and $n>=1$, we can get $T(n)<=Cn$. Now, we are attempting to prove that for $n=t+1$, $T(n)<=Cn$.}%使用{}括号并且文本换行自带空格

		$\bullet$ since $n>=1$, $[n/4]<=n<=t$, $[n/6]<=n<=t$, $[n/7]<=n<=t$
		\begin{align*}
 		T(n)&=n+T([n/2])+T([n/6])+T([n/7]) \\
		&<=n + \frac{Cn}{2}  + \frac{Cn}{6} + \frac{Cn}{7} \\
		\end{align*}


		$\bullet$ In order to let $T(n)<=Cn$,
		\begin{align*}
 		&n + \frac{Cn}{2}  + \frac{Cn}{6} + \frac{Cn}{7}<=Cn\\
		&n <=\frac{4Cn}{21}\\
		&C >=\frac{21}{4},(n>=1)
		\end{align*}
		
	\noindent
	\textbf{Formal answer:}
	{Let $C=10$.  We assume that $T(n)<=f(n)=10n$}.

		% 用\\意味着不换段只是换行，文本空两行可以首行缩进
		$\bullet$ \textbf{base case:}
		For $n=1$ and $n=2$, it is obvious that $T(1)=1<=10=f(1)$ and $T(2)=1<=20=f(2)$.


		$\bullet$ \textbf{Induction hypothesis:}
		Let $k>0$ be an arbitary integer, assume that $T(n)<=10n$ for any integer n satisfying $n<=k$.

		
		$\bullet$ \textbf{Induction Step:}
		Now, if we prove that $T(n)<=10n$ holds for n=k+1, then we can conclude that $T(n)<=10n$.


		
		\textbf{case 1$(k<=22)$}:
		$T(n)=1$ for n satisfying $n=k+1<=23$. Let $f(n)=10n$. Because $f'(n)=10>0$ for $n>=1$, f(n) is an increasing function. We can prove that $T(n)<=f(1)<=f(n)=10n$.

		
		\textbf{case 2$(k>=23)$}:
		$T(n)=n+T([n/4])+T([n/6])+T([n/7])$ for n satisfying $n=k+1>=24$. since $n=k+1>=24$, we could know that $[n/4]<n<=k$, $[n/6]<=n<=t$ and $[n/7]<=n<=t$. Thus, 
		\begin{align*}
 		T(n)&=n+T([n/4])+T([n/6])+T([n/7]) \\
		&<=n + \frac{10n}{4}  + \frac{10n}{6} + \frac{10n}{7}\\
		&= \frac{277}{42}n\\
		&\approx 6.5952n<=10n
		\end{align*}

		Now, we can conclude that 	$T(n)<=10n$ for all integer n. According to the definition, we prove that $T(n)=O(n)$. Finally, we consider the case where n is a negative integer or 0. Obviously, $T(n)=1$, so $T(n)=O(1)$ for negative integer or 0. Overall, $T(n)=O(n)$ for all integer n.


\end{document}